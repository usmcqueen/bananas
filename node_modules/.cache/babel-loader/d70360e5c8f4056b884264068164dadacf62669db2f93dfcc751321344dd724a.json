{"ast":null,"code":"/*!\n * cookie-parser\n * Copyright(c) 2014 TJ Holowaychuk\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\nvar cookie = require('cookie');\nvar signature = require('cookie-signature');\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = cookieParser;\nmodule.exports.JSONCookie = JSONCookie;\nmodule.exports.JSONCookies = JSONCookies;\nmodule.exports.signedCookie = signedCookie;\nmodule.exports.signedCookies = signedCookies;\n\n/**\n * Parse Cookie header and populate `req.cookies`\n * with an object keyed by the cookie names.\n *\n * @param {string|array} [secret] A string (or array of strings) representing cookie signing secret(s).\n * @param {Object} [options]\n * @return {Function}\n * @public\n */\n\nfunction cookieParser(secret, options) {\n  var secrets = !secret || Array.isArray(secret) ? secret || [] : [secret];\n  return function cookieParser(req, res, next) {\n    if (req.cookies) {\n      return next();\n    }\n    var cookies = req.headers.cookie;\n    req.secret = secrets[0];\n    req.cookies = Object.create(null);\n    req.signedCookies = Object.create(null);\n\n    // no cookies\n    if (!cookies) {\n      return next();\n    }\n    req.cookies = cookie.parse(cookies, options);\n\n    // parse signed cookies\n    if (secrets.length !== 0) {\n      req.signedCookies = signedCookies(req.cookies, secrets);\n      req.signedCookies = JSONCookies(req.signedCookies);\n    }\n\n    // parse JSON cookies\n    req.cookies = JSONCookies(req.cookies);\n    next();\n  };\n}\n\n/**\n * Parse JSON cookie string.\n *\n * @param {String} str\n * @return {Object} Parsed object or undefined if not json cookie\n * @public\n */\n\nfunction JSONCookie(str) {\n  if (typeof str !== 'string' || str.substr(0, 2) !== 'j:') {\n    return undefined;\n  }\n  try {\n    return JSON.parse(str.slice(2));\n  } catch (err) {\n    return undefined;\n  }\n}\n\n/**\n * Parse JSON cookies.\n *\n * @param {Object} obj\n * @return {Object}\n * @public\n */\n\nfunction JSONCookies(obj) {\n  var cookies = Object.keys(obj);\n  var key;\n  var val;\n  for (var i = 0; i < cookies.length; i++) {\n    key = cookies[i];\n    val = JSONCookie(obj[key]);\n    if (val) {\n      obj[key] = val;\n    }\n  }\n  return obj;\n}\n\n/**\n * Parse a signed cookie string, return the decoded value.\n *\n * @param {String} str signed cookie string\n * @param {string|array} secret\n * @return {String} decoded value\n * @public\n */\n\nfunction signedCookie(str, secret) {\n  if (typeof str !== 'string') {\n    return undefined;\n  }\n  if (str.substr(0, 2) !== 's:') {\n    return str;\n  }\n  var secrets = !secret || Array.isArray(secret) ? secret || [] : [secret];\n  for (var i = 0; i < secrets.length; i++) {\n    var val = signature.unsign(str.slice(2), secrets[i]);\n    if (val !== false) {\n      return val;\n    }\n  }\n  return false;\n}\n\n/**\n * Parse signed cookies, returning an object containing the decoded key/value\n * pairs, while removing the signed key from obj.\n *\n * @param {Object} obj\n * @param {string|array} secret\n * @return {Object}\n * @public\n */\n\nfunction signedCookies(obj, secret) {\n  var cookies = Object.keys(obj);\n  var dec;\n  var key;\n  var ret = Object.create(null);\n  var val;\n  for (var i = 0; i < cookies.length; i++) {\n    key = cookies[i];\n    val = obj[key];\n    dec = signedCookie(val, secret);\n    if (val !== dec) {\n      ret[key] = dec;\n      delete obj[key];\n    }\n  }\n  return ret;\n}","map":{"version":3,"names":["cookie","require","signature","module","exports","cookieParser","JSONCookie","JSONCookies","signedCookie","signedCookies","secret","options","secrets","Array","isArray","req","res","next","cookies","headers","Object","create","parse","length","str","substr","undefined","JSON","slice","err","obj","keys","key","val","i","unsign","dec","ret"],"sources":["/Users/usmcqueen/Desktop/andreacapstone/client/node_modules/cookie-parser/index.js"],"sourcesContent":["/*!\n * cookie-parser\n * Copyright(c) 2014 TJ Holowaychuk\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar cookie = require('cookie')\nvar signature = require('cookie-signature')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = cookieParser\nmodule.exports.JSONCookie = JSONCookie\nmodule.exports.JSONCookies = JSONCookies\nmodule.exports.signedCookie = signedCookie\nmodule.exports.signedCookies = signedCookies\n\n/**\n * Parse Cookie header and populate `req.cookies`\n * with an object keyed by the cookie names.\n *\n * @param {string|array} [secret] A string (or array of strings) representing cookie signing secret(s).\n * @param {Object} [options]\n * @return {Function}\n * @public\n */\n\nfunction cookieParser (secret, options) {\n  var secrets = !secret || Array.isArray(secret)\n    ? (secret || [])\n    : [secret]\n\n  return function cookieParser (req, res, next) {\n    if (req.cookies) {\n      return next()\n    }\n\n    var cookies = req.headers.cookie\n\n    req.secret = secrets[0]\n    req.cookies = Object.create(null)\n    req.signedCookies = Object.create(null)\n\n    // no cookies\n    if (!cookies) {\n      return next()\n    }\n\n    req.cookies = cookie.parse(cookies, options)\n\n    // parse signed cookies\n    if (secrets.length !== 0) {\n      req.signedCookies = signedCookies(req.cookies, secrets)\n      req.signedCookies = JSONCookies(req.signedCookies)\n    }\n\n    // parse JSON cookies\n    req.cookies = JSONCookies(req.cookies)\n\n    next()\n  }\n}\n\n/**\n * Parse JSON cookie string.\n *\n * @param {String} str\n * @return {Object} Parsed object or undefined if not json cookie\n * @public\n */\n\nfunction JSONCookie (str) {\n  if (typeof str !== 'string' || str.substr(0, 2) !== 'j:') {\n    return undefined\n  }\n\n  try {\n    return JSON.parse(str.slice(2))\n  } catch (err) {\n    return undefined\n  }\n}\n\n/**\n * Parse JSON cookies.\n *\n * @param {Object} obj\n * @return {Object}\n * @public\n */\n\nfunction JSONCookies (obj) {\n  var cookies = Object.keys(obj)\n  var key\n  var val\n\n  for (var i = 0; i < cookies.length; i++) {\n    key = cookies[i]\n    val = JSONCookie(obj[key])\n\n    if (val) {\n      obj[key] = val\n    }\n  }\n\n  return obj\n}\n\n/**\n * Parse a signed cookie string, return the decoded value.\n *\n * @param {String} str signed cookie string\n * @param {string|array} secret\n * @return {String} decoded value\n * @public\n */\n\nfunction signedCookie (str, secret) {\n  if (typeof str !== 'string') {\n    return undefined\n  }\n\n  if (str.substr(0, 2) !== 's:') {\n    return str\n  }\n\n  var secrets = !secret || Array.isArray(secret)\n    ? (secret || [])\n    : [secret]\n\n  for (var i = 0; i < secrets.length; i++) {\n    var val = signature.unsign(str.slice(2), secrets[i])\n\n    if (val !== false) {\n      return val\n    }\n  }\n\n  return false\n}\n\n/**\n * Parse signed cookies, returning an object containing the decoded key/value\n * pairs, while removing the signed key from obj.\n *\n * @param {Object} obj\n * @param {string|array} secret\n * @return {Object}\n * @public\n */\n\nfunction signedCookies (obj, secret) {\n  var cookies = Object.keys(obj)\n  var dec\n  var key\n  var ret = Object.create(null)\n  var val\n\n  for (var i = 0; i < cookies.length; i++) {\n    key = cookies[i]\n    val = obj[key]\n    dec = signedCookie(val, secret)\n\n    if (val !== dec) {\n      ret[key] = dec\n      delete obj[key]\n    }\n  }\n\n  return ret\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}